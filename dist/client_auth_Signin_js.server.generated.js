"use strict";
/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "client_auth_Signin_js";
exports.ids = ["client_auth_Signin_js"];
exports.modules = {

/***/ "./client/auth/Signin.js":
/*!*******************************!*\
  !*** ./client/auth/Signin.js ***!
  \*******************************/
/***/ ((module, exports, __webpack_require__) => {

eval("/* module decorator */ module = __webpack_require__.nmd(module);\n\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = Signin;\nvar _react = _interopRequireWildcard(__webpack_require__(/*! react */ \"react\"));\nvar _reactRouterDom = __webpack_require__(/*! react-router-dom */ \"react-router-dom\");\nvar _Avatar = _interopRequireDefault(__webpack_require__(/*! @mui/material/Avatar */ \"@mui/material/Avatar\"));\nvar _Button = _interopRequireDefault(__webpack_require__(/*! @mui/material/Button */ \"@mui/material/Button\"));\nvar _CssBaseline = _interopRequireDefault(__webpack_require__(/*! @mui/material/CssBaseline */ \"@mui/material/CssBaseline\"));\nvar _TextField = _interopRequireDefault(__webpack_require__(/*! @mui/material/TextField */ \"@mui/material/TextField\"));\nvar _Grid = _interopRequireDefault(__webpack_require__(/*! @mui/material/Grid */ \"@mui/material/Grid\"));\nvar _Box = _interopRequireDefault(__webpack_require__(/*! @mui/material/Box */ \"@mui/material/Box\"));\nvar _LockOutlined = _interopRequireDefault(__webpack_require__(/*! @mui/icons-material/LockOutlined */ \"@mui/icons-material/LockOutlined\"));\nvar _Typography = _interopRequireDefault(__webpack_require__(/*! @mui/material/Typography */ \"@mui/material/Typography\"));\nvar _Container = _interopRequireDefault(__webpack_require__(/*! @mui/material/Container */ \"@mui/material/Container\"));\nvar _Icon = _interopRequireDefault(__webpack_require__(/*! @mui/material/Icon */ \"@mui/material/Icon\"));\nvar _apiAuth = __webpack_require__(/*! ./api-auth */ \"./client/auth/api-auth.js\");\nvar _authHelper = _interopRequireDefault(__webpack_require__(/*! ./auth-helper */ \"./client/auth/auth-helper.js\"));\nvar _styles = __webpack_require__(/*! @mui/material/styles */ \"@mui/material/styles\");\nvar _material = __webpack_require__(/*! @mui/material */ \"@mui/material\");\nvar _CopyRight = __webpack_require__(/*! ./../assets/js/CopyRight */ \"./client/assets/js/CopyRight.js\");\nvar _AuthProvider = __webpack_require__(/*! ./../core/AuthProvider */ \"./client/core/AuthProvider.js\");\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nfunction _getRequireWildcardCache(e) { if (\"function\" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function (e) { return e ? t : r; })(e); }\nfunction _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || \"object\" != typeof e && \"function\" != typeof e) return { default: e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if (\"default\" !== u && {}.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n.default = e, t && t.set(e, n), n; }\n(function () {\n  var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;\n  enterModule && enterModule(module);\n})();\nvar __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {\n  return a;\n};\n// import Menu from \"./../core/menuCLC\";\n// import Carousel from \"react-material-ui-carousel\";\n\nconst theme = (0, _styles.createTheme)({\n  error: {\n    verticalAlign: \"middle\"\n  },\n  title: {\n    marginTop: 2,\n    color: \"#3f4771\"\n  },\n  textField: {\n    marginLeft: 1,\n    marginRight: 1,\n    width: 300\n  },\n  submit: {\n    margin: \"auto\",\n    marginBottom: 2\n  }\n});\n\n//const theme = theme();\n\nfunction Signin(props) {\n  const {\n    isAuthenticated,\n    setIsAuthenticated,\n    isJwtRol,\n    setIsJwtRol\n  } = (0, _react.useContext)(_AuthProvider.AuthContext);\n  //const [isJwtRol, setIsJwtRol] = useContext(AuthContext);\n\n  const navigate = (0, _reactRouterDom.useNavigate)();\n  let {\n    useParam\n  } = (0, _reactRouterDom.useParams)();\n  const [valores, setValores] = (0, _react.useState)({\n    nombre_usuario: \"\",\n    password: \"\",\n    error: \"\",\n    redirige: false\n  });\n  const handleChange = name => event => {\n    setValores({\n      ...valores,\n      [name]: event.target.value\n    });\n  };\n  const msgErrorNull = () => {\n    setValores({\n      ...valores,\n      error: \"\"\n    });\n  };\n  const clickSubmit = event => {\n    event.preventDefault();\n    const user = {\n      nombre_usuario: valores.nombre_usuario || undefined,\n      password: valores.password || undefined\n    };\n    (0, _apiAuth.signin)(user).then(data => {\n      if (data.error) {\n        setValores({\n          ...valores,\n          error: data.error\n        });\n        setIsAuthenticated(false);\n        setIsJwtRol(false);\n      } else {\n        _authHelper.default.authenticate(data, () => {\n          setValores({\n            ...valores,\n            error: \"\",\n            redirige: true,\n            password: false\n          });\n        });\n        setIsAuthenticated(true);\n        setIsJwtRol(data.user);\n      }\n    });\n  };\n  (0, _react.useEffect)(() => {\n    if (valores.redirige && isAuthenticated) {\n      navigate(\"/\");\n    }\n  }, [isAuthenticated, valores, navigate]);\n  return /*#__PURE__*/_react.default.createElement(_styles.ThemeProvider, {\n    theme: theme\n  }, /*#__PURE__*/_react.default.createElement(_Container.default, {\n    component: \"main\",\n    maxWidth: \"xs\"\n  }, /*#__PURE__*/_react.default.createElement(_CssBaseline.default, null), /*#__PURE__*/_react.default.createElement(_Box.default, {\n    sx: {\n      marginTop: 8,\n      display: \"flex\",\n      flexDirection: \"column\",\n      alignItems: \"center\"\n    },\n    style: {\n      paddingTop: \"88px\"\n    }\n  }, /*#__PURE__*/_react.default.createElement(_Avatar.default, {\n    sx: {\n      m: 1,\n      bgcolor: \"secondary.main\"\n    }\n  }, /*#__PURE__*/_react.default.createElement(_LockOutlined.default, null)), /*#__PURE__*/_react.default.createElement(_Typography.default, {\n    component: \"h1\",\n    variant: \"h5\"\n  }, \"Ingreso\"), /*#__PURE__*/_react.default.createElement(_Box.default, {\n    component: \"form\",\n    noValidate: true,\n    sx: {\n      mt: 3\n    }\n  }, /*#__PURE__*/_react.default.createElement(_Grid.default, {\n    container: true,\n    spacing: 2\n  }, /*#__PURE__*/_react.default.createElement(_Grid.default, {\n    item: true,\n    xs: 12\n  }, /*#__PURE__*/_react.default.createElement(_TextField.default, {\n    autoComplete: \"given-name\",\n    name: \"usuario\",\n    required: true,\n    fullWidth: true,\n    id: \"nombre_usuario\",\n    label: \"Nombre de Usuario\",\n    value: valores.name,\n    onChange: handleChange(\"nombre_usuario\"),\n    onFocus: msgErrorNull,\n    autoFocus: true\n  })), /*#__PURE__*/_react.default.createElement(_Grid.default, {\n    item: true,\n    xs: 12\n  }, /*#__PURE__*/_react.default.createElement(_material.FormControl, {\n    sx: {\n      m: 2,\n      width: \"45ch\"\n    },\n    variant: \"outlined\"\n  }, /*#__PURE__*/_react.default.createElement(_material.InputLabel, {\n    htmlFor: \"password\"\n  }, \"Clave \"), /*#__PURE__*/_react.default.createElement(_material.OutlinedInput, {\n    id: \"password\",\n    type: \"password\",\n    value: valores.password,\n    onChange: handleChange(\"password\"),\n    onFocus: msgErrorNull,\n    label: \"Clave\"\n  }))), valores.error && /*#__PURE__*/_react.default.createElement(_Typography.default, {\n    component: \"p\",\n    color: \"error\"\n  }, /*#__PURE__*/_react.default.createElement(_Icon.default, {\n    color: \"error\"\n  }, \"error\"), valores.error)), /*#__PURE__*/_react.default.createElement(_Button.default, {\n    type: \"submit\",\n    fullWidth: true,\n    variant: \"contained\",\n    sx: {\n      mt: 3,\n      mb: 2\n    },\n    onClick: clickSubmit\n  }, \"Ingresar\"))), /*#__PURE__*/_react.default.createElement(_CopyRight.Copyright, {\n    sx: {\n      mt: 5\n    }\n  })));\n}\n__signature__(Signin, \"useContext{{ isAuthenticated, setIsAuthenticated, isJwtRol, setIsJwtRol }}\\nuseNavigate{navigate}\\nuseParams{{ useParam }}\\nuseState{[valores, setValores]({\\r\\n    nombre_usuario: \\\"\\\",\\r\\n    password: \\\"\\\",\\r\\n    error: \\\"\\\",\\r\\n    redirige: false,\\r\\n  })}\\nuseEffect{}\", () => [_reactRouterDom.useNavigate, _reactRouterDom.useParams]);\n;\n(function () {\n  var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;\n  if (!reactHotLoader) {\n    return;\n  }\n  reactHotLoader.register(theme, \"theme\", \"C:\\\\clc\\\\AppNew\\\\client\\\\auth\\\\Signin.js\");\n  reactHotLoader.register(Signin, \"Signin\", \"C:\\\\clc\\\\AppNew\\\\client\\\\auth\\\\Signin.js\");\n})();\n;\n(function () {\n  var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;\n  leaveModule && leaveModule(module);\n})();\n\n//# sourceURL=webpack://setup/./client/auth/Signin.js?");

/***/ })

};
;